# Matcher v1 정책

## 목적
- 서로 다른 플랫폼에서 동일 매물 유사도를 계산해 `AUTO_MATCH/REVIEW_REQUIRED/DISTINCT`를 산정.
- 플랫폼별 면적 단위/표기 차이, 가격 오차를 허용 범위 내에서 정합성 있게 처리.

## 점수 가중치
- 주소: `0.30`
- 좌표 거리: `0.20`
- 면적: `0.25`
- 가격: `0.15`
- 속성: `0.10`

## 면적 정합 규칙
- 전용/전용: 상대오차 6% 이내면 높은 점수
- 전용/공용 혼재: 비율 `1.05~1.35` 가산
- 범위형: overlap 구간이 존재하면 후보 통과

## 가격 정합 규칙
- 월세: 8% 이내 허용
- 보증금: 12% 이내 허용

## 임계치
- `score >= 93` => `AUTO_MATCH`
- `80 <= score < 93` => `REVIEW_REQUIRED`
- `< 80` => `DISTINCT`

## 동작 안전장치
- 같은 플랫폼 + 동일 `external_id`는 강제 동기화 후보로 간주
- 면적·가격·주소가 모두 상이한 경우 점수 과대 계산 방지를 위해 `CONFLICT_PENALTY` 적용
- 후보 생성은 `주소코드 + 가격버킷 + 면적버킷`으로 블로킹해 계산량 축소

## 실행 산출물
- `pairs`: 플랫폼 쌍 단위 점수/근거
- `match_groups`: `AUTO_MATCH`만 Union-Find로 군집 구성
- `input_summary`: 후보 수, 상태 분포
